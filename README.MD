app/
‚îÇ
‚îú‚îÄ‚îÄ api/                # —Ä–æ—É—Ç—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP
‚îÇ
‚îú‚îÄ‚îÄ core/               # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, security, jwt
‚îÇ
‚îú‚îÄ‚îÄ db/                 # —Ä–∞–±–æ—Ç–∞ —Å –ë–î (session, init)
‚îÇ   ‚îú‚îÄ‚îÄ base.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ models/             # SQLAlchemy –º–æ–¥–µ–ª–∏ (User, Article –∏ —Ç.–ø.)
‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îú‚îÄ‚îÄ article.py
‚îÇ   ‚îú‚îÄ‚îÄ comment.py
‚îÇ   ‚îú‚îÄ‚îÄ profile.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ repositories/       # CRUD-–ª–æ–≥–∏–∫–∞ (—Ä–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ Session)
‚îÇ   ‚îú‚îÄ‚îÄ users.py
‚îÇ   ‚îú‚îÄ‚îÄ articles.py
‚îÇ   ‚îú‚îÄ‚îÄ comments.py
‚îÇ   ‚îú‚îÄ‚îÄ profiles.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ schemas/            # Pydantic DTO
‚îÇ
‚îú‚îÄ‚îÄ services/           # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç repositories)
‚îÇ
‚îî‚îÄ‚îÄ main.py


1. api/ ‚Äî HTTP —Å–ª–æ–π
–ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—Å—ë, —á—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç—ã FastAPI –∫–∞–∫ –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞:
api/
‚îú‚îÄ‚îÄ deps.py        # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI (get_current_user, get_db –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ errors/        # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ routes/        # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ articles.py
‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îú‚îÄ‚îÄ comments.py
‚îÇ   ‚îú‚îÄ‚îÄ profiles.py
‚îÇ   ‚îî‚îÄ‚îÄ users.py
‚îî‚îÄ‚îÄ __init__.py
üìå –ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?
‚úî –†–æ—É—Ç—ã
–û–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
–ø—Ä–∏–Ω–∏–º–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã
–≤—ã–∑—ã–≤–∞—é—Ç —Å–µ—Ä–≤–∏—Å—ã
—Ñ–æ—Ä–º–∏—Ä—É—é—Ç HTTP-–æ—Ç–≤–µ—Ç—ã (JSON-—Ñ–∞–π–ª—ã)
‚úî –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (deps.py)
–ù–∞–ø—Ä–∏–º–µ—Ä:
–ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ JWT
–ø–æ–ª—É—á–∏—Ç—å –ë–î-—Å–µ—Å—Å–∏—é
–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
–≠—Ç–æ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ FastAPI Depends().
‚úî –û—à–∏–±–∫–∏ (errors/)
–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä 404 Not Found).
üìç –í–∞–∂–Ω–æ: API –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ SQLAlchemy, JWT, –ª–æ–≥–∏–∫—É ‚Äî —Ç–æ–ª—å–∫–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã.
üì¶ 2. core/ ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
core/
‚îú‚îÄ‚îÄ config.py      # Pydantic Settings ‚Äî env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ jwt.py         # –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT —Ç–æ–∫–µ–Ω–æ–≤
‚îú‚îÄ‚îÄ security.py    # OAuth2 —Å—Ö–µ–º—ã, Depends
‚îú‚îÄ‚îÄ hashing.py     # —Ä–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–æ–ª—è–º–∏ (bcrypt)
‚îî‚îÄ‚îÄ __init__.py
üìå –°–º—ã—Å–ª
—Ç—É—Ç –Ω–µ—Ç –º–æ–¥–µ–ª–µ–π
–Ω–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
–Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
–≠—Ç–æ —á–∏—Å—Ç–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
–§–∞–π–ª	–ó–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç
config.py	–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (DB_URL, JWT_SECRET –∏ –¥—Ä.)
jwt.py	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è, –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT
security.py	OAuth —Å—Ö–µ–º—ã, FastAPI security –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
hashing.py	–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ/–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
üìç –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö, –∞ –Ω–µ –≤ —Ä–æ—É—Ç–µ—Ä–∞—Ö.
üì¶ 3. db/ ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
db/
‚îú‚îÄ‚îÄ base.py        # —Å–±–æ—Ä –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –≤ metadata
‚îî‚îÄ‚îÄ session.py     # —Å–æ–∑–¥–∞–Ω–∏–µ engine –∏ async_session
üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç?
—Å–æ–∑–¥–∞—ë—Ç AsyncEngine
—Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–±—Ä–∏–∫—É AsyncSession
–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª–∏ –≤ Base (–¥–ª—è Alembic)
üìç –û—á–µ–Ω—å –≤–∞–∂–Ω–æ:
db/ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥–µ–ª–µ–π –∏ CRUD.
üì¶ 4. models/ ‚Äî SQLAlchemy –º–æ–¥–µ–ª–∏
models/
‚îú‚îÄ‚îÄ user.py
‚îú‚îÄ‚îÄ article.py
‚îú‚îÄ‚îÄ comment.py
‚îî‚îÄ‚îÄ __init__.py
üìå –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –º–æ–¥–µ–ª–µ–π
—ç—Ç–æ —á–∏—Å—Ç—ã–µ ORM-–∫–ª–∞—Å—Å—ã
–±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
–±–µ–∑ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π
—Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î: –ø–æ–ª—è, —Å–≤—è–∑–∏, –∏–Ω–¥–µ–∫—Å—ã
–ú–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:
–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö (–¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤)
–≤ Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)
–≤ —Å–µ—Ä–≤–∏—Å–∞—Ö (–∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç–∏)
üìç –£—Ä–æ–≤–µ–Ω—å: domain/data model
üì¶ 5. repositories/ ‚Äî —Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
repositories/
‚îú‚îÄ‚îÄ users.py
‚îú‚îÄ‚îÄ articles.py
‚îú‚îÄ‚îÄ comments.py
‚îî‚îÄ‚îÄ profiles.py
–ö–∞–∂–¥—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥–µ–ª–∏.
üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π?
—Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏
–æ–±–Ω–æ–≤–ª—è–µ—Ç
—É–¥–∞–ª—è–µ—Ç
–≤—ã–±–∏—Ä–∞–µ—Ç –∏–∑ –ë–î
–ø–∏—à–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã
–ü—Ä–∏–º–µ—Ä:
class UsersRepository:
    async def get_by_email(self, email: str) -> User:
    async def create(self, data: dict) -> User:
    async def update(self, user: User, data: dict):
üìç –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –∑–Ω–∞–µ—Ç:
–ø—Ä–æ JWT
–ø—Ä–æ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
–ø—Ä–æ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –ë–î.
üì¶ 6. schemas/ ‚Äî Pydantic DTO
schemas/
‚îú‚îÄ‚îÄ users.py
‚îú‚îÄ‚îÄ articles.py
‚îú‚îÄ‚îÄ comments.py
‚îî‚îÄ‚îÄ profiles.py
üìå –ß—Ç–æ –∑–¥–µ—Å—å?
–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è:
–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö JSON
—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ API
request/response —Å—Ç—Ä—É–∫—Ç—É—Ä
–¢–∏–ø—ã —Å—Ö–µ–º:
BaseSchema
CreateSchema
UpdateSchema
ResponseSchema
üìç –í–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
–°—Ö–µ–º—ã ‚Äî –Ω–µ –º–æ–¥–µ–ª–∏ –ë–î.
–û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ API –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö.
üì¶ 7. services/ ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
services/
‚îú‚îÄ‚îÄ auth.py
‚îú‚îÄ‚îÄ users.py
‚îú‚îÄ‚îÄ articles.py
‚îî‚îÄ‚îÄ comments.py
üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–µ—Ä–≤–∏—Å?
–≠—Ç–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ—Å—Ç–æ.
–ü—Ä–∏–º–µ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
AuthService
–ª–æ–≥–∏–Ω
—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
–≥–µ–Ω–µ—Ä–∞—Ü–∏—è JWT
UserService
–ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
ArticleService
—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
–ª–∞–π–∫–∏
—Ç–µ–≥–∏
CommentService
–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
—Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ core (jwt, hashing)
—Å—Ö–µ–º—ã
–±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
üìç –ù–ò –û–î–ò–ù —Ä–æ—É—Ç–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.
üì¶ 8. main.py ‚Äî —Å–±–æ—Ä–∫–∞ FastAPI
main.py
–î–µ–ª–∞–µ—Ç:
—Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç FastAPI
–ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Ä–æ—É—Ç–µ—Ä—ã
–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç middleware
–º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç
event handlers (startup/shutdown)
üéØ –û–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
API ‚Üí Services ‚Üí Repositories ‚Üí DB
[API] ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç ‚Üí [Services] ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç ‚Üí [Repositories] ‚Üí —Ä–∞–±–æ—Ç–∞—é—Ç —Å ‚Üí [DB]
models/ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
schemas/ ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è
core/ ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

Repositories ‚Äî –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
–≠—Ç–æ Data Access Layer.
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–†–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å –ë–î:
–¥–µ–ª–∞—é—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã
—Å–æ–∑–¥–∞—é—Ç –∑–∞–ø–∏—Å–∏
–æ–±–Ω–æ–≤–ª—è—é—Ç
—É–¥–∞–ª—è—é—Ç
–≤—ã–ø–æ–ª–Ω—è—é—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
–∏—Å–ø–æ–ª—å–∑—É—é—Ç SQLAlchemy Session
–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞
‚úî CRUD-–º–µ—Ç–æ–¥—ã
‚úî –ù–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚úî –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–∞–≤–∏–ª
‚úî –ù–∏–∫–∞–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π "–º–æ–∂–Ω–æ/–Ω–µ–ª—å–∑—è"
–ü—Ä–∏–º–µ—Ä (users.py)
class UsersRepository:
    async def get_by_email(self, session, email: str):
        return await session.scalar(
            select(User).where(User.email == email)
        )

    async def create(self, session, user_data: dict) -> User:
        user = User(**user_data)
        session.add(user)
        await session.commit()
        await session.refresh(user)
        return user
üìå –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Ç–æ, –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.
üß† Services ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
–≠—Ç–æ Domain / Application Layer.
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–†–µ—à–∞—é—Ç —á—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å, –∞ –Ω–µ –∫–∞–∫ –¥–æ—Å—Ç–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ:
—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–≤–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
–æ—Ç–ø—Ä–∞–≤–∫–∞ email
–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
–ø–æ–¥—Å—á—ë—Ç —á–µ–≥–æ-–ª–∏–±–æ
–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞
‚úî ¬´–ú–æ–∑–≥¬ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úî –í—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚úî –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
‚úî –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
–ü—Ä–∏–º–µ—Ä (auth.py)
class AuthService:
    def __init__(self, users_repo: UsersRepository):
        self.users_repo = users_repo

    async def register_user(self, session, data: UserCreateSchema):
        # 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ email —Å–≤–æ–±–æ–¥–µ–Ω (–±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–æ)
        existing = await self.users_repo.get_by_email(session, data.email)
        if existing:
            raise HTTPException(400, "Email already in use")

        # 2. –•–µ—à–∏—Ä—É–µ–º –ø–∞—Ä–æ–ª—å (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
        hashed_password = hash_password(data.password)

        # 3. –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        user = await self.users_repo.create(
            session,
            {"email": data.email, "password_hash": hashed_password}
        )

        # 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º JWT
        token = create_jwt({"sub": str(user.id)})

        return token
üìå –°–µ—Ä–≤–∏—Å —Ä–µ—à–∞–µ—Ç —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äî –∫–∞–∫ –¥–æ—Å—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.
üÜö –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
–ö—Ä–∏—Ç–µ—Ä–∏–π	Repositories	Services
–£—Ä–æ–≤–µ–Ω—å	–†–∞–±–æ—Ç–∞ —Å –ë–î	–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
–ß—Ç–æ –¥–µ–ª–∞–µ—Ç	CRUD, SQL	–ü—Ä–æ–≤–µ—Ä–∫–∏, –ø—Ä–∞–≤–∏–ª–∞, –æ–ø–µ—Ä–∞—Ü–∏–∏
–†–∞–±–æ—Ç–∞–µ—Ç —Å	SQLAlchemy	–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏ + core
–†–µ—à–µ–Ω–∏—è	–ù–µ—Ç	–î–∞
–ü—Ä–∏–º–µ—Ä	get_user(id)	register_user(), login()
üéØ –ü—Ä–æ—Å—Ç–∞—è –º–µ—Ç–∞—Ñ–æ—Ä–∞
Repositories = –æ—Ñ–∏—Ü–∏–∞–Ω—Ç (–ø—Ä–∏–Ω—ë—Å –µ–¥—É)
Services = —à–µ—Ñ-–ø–æ–≤–∞—Ä (—Ä–µ—à–∞–µ—Ç, —á—Ç–æ –≥–æ—Ç–æ–≤–∏—Ç—å –∏ –∫–∞–∫)
–®–µ—Ñ –Ω–µ —Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏, –æ—Ñ–∏—Ü–∏–∞–Ω—Ç –Ω–µ —Ä–µ—à–∞–µ—Ç –º–µ–Ω—é.
üéÅ –•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –¥–∞—Ç—å:
‚úî –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞
–≥–¥–µ services –∏ repositories –ø–æ–∫–∞–∑–∞–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–µ–π—Å–∞—Ö (Auth + Users)
–∏–ª–∏
‚úî –ø—Ä–∞–≤–∏–ª–æ: –∫–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å, –∫–æ–≥–¥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
–°–∫–∞–∑–∞—Ç—å?